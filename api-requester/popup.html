<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Request Runner</title>
  <style>
    body { font: 13px/1.35 system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 12px; width: 520px; }
    label { display:block; margin: 8px 0 4px; font-weight: 600; }
    input[type="text"], textarea { width: 100%; box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
    textarea { min-height: 80px; }
    .row { display: flex; gap: 8px; align-items: center; }
    .row > * { flex: 1; }
    button { padding: 8px 12px; cursor: pointer; }
    .small { font-size: 12px; opacity: 0.8; }
    .result { white-space: pre-wrap; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; background: #f6f8fa; border: 1px solid #d0d7de; padding: 8px; border-radius: 6px; max-height: 320px; overflow: auto; }
    .status { font-weight: 700; }
    .danger { color: #b60205; }
    .note { margin-top: 6px; }
  </style>
</head>
<body>
  <div class="row">
    <select id="method">
      <option>GET</option>
      <option>POST</option>
      <option>PUT</option>
      <option>PATCH</option>
      <option>DELETE</option>
    </select>
    <input id="url" type="text" placeholder="https://dev.azure.com/{org}/_apis/... or https://api.github.com/...">
  </div>

  <label for="headers">Headers (JSON object)</label>
  <textarea id="headers" placeholder='{"Accept":"application/json"}'></textarea>

  <label for="body">Body (raw)</label>
  <textarea id="body" placeholder='{"name":"value"}'></textarea>

  <div class="row">
    <label class="small"><input type="checkbox" id="runInTab" checked> Run in active tab origin (uses your cookies)</label>
    <span></span>
    <button id="send">Send</button>
  </div>

  <div class="note small">
    Tip: For ADO, open any <strong>dev.azure.com</strong> page, keep this popup open, and run the request. For GitHub, cookies likely wonâ€™t auth <strong>api.github.com</strong>; use a token header (e.g., <code>Authorization: Bearer &lt;PAT&gt;</code>).
  </div>

  <hr>

  <div id="out-status" class="status"></div>
  <div id="out-headers" class="result" style="display:none"></div>
  <div id="out-body" class="result" style="display:none"></div>

  <script src="popup.js"></script>
</body>
</html>
